<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitLab Pipeline Generator</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="dark-mode">
    <div class="container">
        <!-- User Section moved above title -->
        <div id="user-section">
            <div id="login-form">
                <select id="username">
                    <option value="">Select User</option>
                    <!-- Will be populated by JavaScript -->
                </select>
                <input type="password" id="password" placeholder="Password" required>
                <button id="login-btn">Login</button>
                <div id="login-error" style="color: red; display: none;"></div>
            </div>
            <div id="logged-in-user" style="display: none;">
                <span id="current-user"></span>
                <button id="logout-btn">Logout</button>
            </div>
        </div>

        <header>
            <h1>GitLab Pipeline Generator</h1>
            <button id="edit-games-button" onclick="toggleEditGames()">EDIT GAMES LIST</button>
            <div class="mode-toggle" onclick="toggleMode()">ðŸŒ“</div>
        </header>

        <div class="sub-title">Actions for All Games</div>
        <div class="buttons-container">
            <div class="left-buttons">
                <button onclick="toggleButton(this)">ALL</button>
                <button onclick="toggleButton(this)">PAYOUTS</button>
                <button onclick="toggleButton(this)">UI</button>
                <button onclick="toggleButton(this)">ANALYTICS</button>
                <button onclick="toggleButton(this)">SMAPP</button>
                <button onclick="toggleButton(this)">DESKTOP</button>
                <button onclick="toggleButton(this)">MOBILE</button>
                <button onclick="clearButtons()">CLEAR</button>
            </div>
            <button id="generate-btn" disabled>Generate Pipeline</button>
        </div>

        <div id="edit-games">
            <h3>Games List</h3>
            <p>*any changes will be lost on page reload</p>
            <div id="games-list-container">
                <!-- Default games will be added here dynamically -->
            </div>
            <button id="add-game-button" onclick="addGameEntry()">ADD GAME</button>
            <button id="save-games-button" onclick="saveGamesList()">SAVE GAMES LIST</button>
        </div>

        <div class="sub-title-2">Actions per Game</div>
        <table>
            <thead>
                <tr>
                    <th rowspan="2">RUN</th>
                    <th id="game-name-header" rowspan="2">Game Name</th>
                    <th colspan="4">Desktop & Mobile</th>
                    <th colspan="4">Desktop</th>
                    <th colspan="3">Mobile</th>
                </tr>
                <tr>
                    <th>All</th>
                    <th>Payouts</th>
                    <th>UI</th>
                    <th>Analytics</th>
                    <th>SMApp</th>
                    <th>Desktop Payouts</th>
                    <th>Desktop UI</th>
                    <th>Desktop Analytics</th>
                    <th>Mobile Payouts</th>
                    <th>Mobile UI</th>
                    <th>Mobile Analytics</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <!-- Rows will be generated here -->
            </tbody>
        </table>

        <!-- Moved Copy Button and Textarea -->
        <div class="output-container">
            <textarea id="output-text" readonly></textarea>
            <button class="copy-button" onclick="copyText()">COPY</button>
        </div>

        <!-- Moved Generate Pipeline Button -->
        <div class="pipeline-controls">
            <button id="generate-btn" disabled>Generate Pipeline</button>
            <div id="pipeline-trigger-section" style="display: none;">
                <select id="branch-selector">
                    <option value="main">main</option>
                </select>
                <button id="trigger-btn">Trigger Pipeline</button>
            </div>
        </div>

        <!-- Expanded Pipeline Info Section -->
        <section id="pipeline-info">
            <h2>Pipeline Information</h2>
            <div id="pipeline-status" class="placeholder">
                No pipeline generated or triggered yet.
            </div>
        </section>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>